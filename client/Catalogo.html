<!DOCTYPE html>
<html lang="es">
<head>
 

     
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

   
   
    <title>Catalogo</title>
</head>

<script>


</script>

 <!-- el BODY tiene estilos -->


 
<body style="margin: 50px;">

    <div class="container mt-5">
        <h1>Buscador</h1>
        <input type="text" id="formulariobuscador" class="my-2">
        <button class="btn btn-primary mb-2" id="botonbuscador">Buscar</button>
        <ul id="resultadodebusqueda">
        
        </ul>
    </div>
<!--


<table id="tablacampos">
    <tr>
        <th>
            precio
        </th>
        <th>
            cantidad
        </th>
        <th>
            nombre
        </th>
        <th>
            categorias
        </th>
        <th>
            descripcion
        </th>
        <th>
            estatus
        </th>
    </tr>
</table>

-->

<script>


      // buscador

      fetch("http://localhost/comercio-virtual/server/productos")
      .then((res) => res.json())
      .then((data) =>{
          
    const formulariobuscador = document.querySelector('#formulariobuscador');
    const botonbuscador = document.querySelector('#botonbuscador');
    const resultadodebusqueda = document.querySelector('#resultadodebusqueda');

    const buscar = () =>{
        resultadodebusqueda.innerHTML = '';
        const text = formulariobuscador.value.toLowerCase();



        for(let producto of data){
            
            let nombre = producto.nombre.toLocaleLowerCase();
            if(nombre.indexOf(text) !== -1){
                resultadodebusqueda.innerHTML += `<li>${producto.nombre} - Valor: ${producto.precio} </li>`
                
            }
        }

        if(resultadodebusqueda.innerHTML === ''){
            resultadodebusqueda.innerHTML += `<li>Producto no encontrado...</li>`
        }

    }

    botonbuscador.addEventListener('click', buscar)
    formulariobuscador.addEventListener('keyup', buscar)
    buscar();
      });

      

        


 // catalogo


 /* function retrieveData () {
          fetch("http://localhost/comercio-virtual/server/productos")
          .then((res) => res.json())
          .then((data) => {
            //   console.log(data);

             data.map((registro)=> {
                console.log(registro)

                const tr = document.createElement("tr");
            
                const datos = "<td> " + registro.precio + "</td>" + "<td> " + registro.cantidad + "</td>" +  "<td> " + registro.nombre + "</td>" + "<td> " + registro.categorias + "</td>" + "<td> " + registro.descripcion + "</td>" + "<td> " + registro.estatus + "</td>";
                tr.innerHTML = datos ;
                
                
                const table = document.getElementById("tablacampos");
                table.appendChild(tr);
                
                
              
             })

            });
        };
      document.addEventListener("DOMContentLoaded", function (event) {
        retrieveData(); 
        
        //Las peticiones se hacen a la uri del server segun las rutas definidas
        
      });  */

    
    
</script>



</body>
</html>